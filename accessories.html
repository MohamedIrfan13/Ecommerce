<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessories</title>
    <link rel="stylesheet" href="AccessoriesPage/accessories.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body>
 


    <header>
    <nav class="navbar">
        <div class="brand">M&M</div>

        <div class="search-bar">
            <input type="text" placeholder="Search Products...">
            <button class="search-btn"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>

        <div class="nav-icons desktop-only">
            <div class="icon-container" id="cart-container">
               <i class="fa-solid fa-bag-shopping"></i>
                <div class="dropdown" id="cart-dropdown">
                    <p>Total Items: <span id="cart-count">0</span></p>
                    <p>Toatal Price: $ <span id="cart-total"></span></p>
                    <button>See Cart</button>
                </div>
            </div>
            <div class="icon-container" id="account-container">
                <i class="fa-regular fa-user"></i>
                <div class="dropdown" id="account-dropdown">
                    <a href="#">Login/Sing In</a>
                    <a href="#">Profile</a>
                    <a href="#">Settings</a>
                </div>
            </div>
        </div>
    <div class="hamburger mobile-only" id="hamburger">
        ☰
      </div>
    </nav>

   
    <div class="mobile-menu" id="mobile-menu">
      <a href="#"><i class="fa-regular fa-cart-shopping"></i> Cart</a>
      <a href="#"><i class="fa-regular fa-user"></i> Login / Sign In</a>
      <a href="#">Profile</a>
      <a href="#">Settings</a>
    </div>

   </header>
   <div class="accessories-page">
    <!-- Filter Column -->
    <aside class="filter-col" id="filter-col">
      <h3>Filter</h3>

      <div class="filter-group">
        <h4>Category</h4>
        <label><input type="checkbox"> Watches</label>
        <label><input type="checkbox"> Sunglasses</label>
        <label><input type="checkbox"> Bags</label>
        <label><input type="checkbox"> Wallets</label>
        <label><input type="checkbox"> Belts</label>
        <label><input type="checkbox"> Jewelry</label>
      </div>

      <div class="filter-group">
        <h4>Brand</h4>
        <label><input type="checkbox"> Fossil</label>
        <label><input type="checkbox"> Titan</label>
        <label><input type="checkbox"> Ray-Ban</label>
        <label><input type="checkbox"> Guess</label>
        <label><input type="checkbox"> Fastrack</label>
      </div>

      <div class="filter-group">
        <h4>Price</h4>
        <label><input type="checkbox"> ₹0 – ₹1,000</label>
        <label><input type="checkbox"> ₹1,000 – ₹5,000</label>
        <label><input type="checkbox"> ₹5,000+</label>
      </div>
    </aside>

    <!-- Products Section -->
    <main class="product-section">
      <div class="mobile-filter-toggle mobile-only">
        <i class="fa-solid fa-filter"></i> Filters
      </div>

      <!-- Sorting Bar -->
      <div class="sorting-bar">
        <label>Sort by:</label>
        <select>
          <option>Popularity</option>
          <option>New Arrivals</option>
          <option>Price: Low to High</option>
          <option>Price: High to Low</option>
        </select>
      </div>

      <!-- Product Grid -->
      <div class="product-grid">
        <div class="product-card"  data-category="Watches" 
        data-brand="Fossil" 
        data-price="6999">
          <img src="AccessoriesPage/Fossil Men’s Watch.jpg" alt="Watch">
          <div class="product-info">
            <h3>Fossil Men’s Watch</h3>
            <p class="price">₹6,999</p>
            <div class="rating">★★★★★ <span>5.0</span></div>
            <button class="cart-btn" data-name="Fossil Men’s Watch" 
  data-price="6999" 
  data-img="AccessoriesPage/Fossil Men’s Watch.jpg">Add to Cart</button>
          </div>
        </div>

        <div class="product-card" data-category="Sunglasses" 
        data-brand="Ray-Ban" 
        data-price="4200">
          <img src="AccessoriesPage/Ray-Ban Sunglasses.jpg" alt="Sunglasses">
          <div class="product-info">
            <h3>Ray-Ban Sunglasses</h3>
            <p class="price">₹4,200</p>
            <div class="rating">★★★★☆ <span>4.3</span></div>
            <button class="cart-btn" data-name="Ray-Ban Sunglasses" data-img="AccessoriesPage/Ray-Ban Sunglasses.jpg" data-price="4200">Add to Cart</button>
          </div>
        </div>

        <div class="product-card"  data-category="Bags" 
        data-brand="Guess" 
        data-price="3500">
          <img src="AccessoriesPage/Leather Shoulder Bag.jpeg" alt="Bag">
          <div class="product-info">
            <h3>Leather Shoulder Bag</h3>
            <p class="price">₹3,500</p>
            <div class="rating">★★★★☆ <span>4.5</span></div>
            <button class="cart-btn" data-name="Leather Shoulder Bag" 
  data-price="3500" 
  data-img="AccessoriesPage/Leather Shoulder Bag.jpeg" >Add to Cart</button>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script>
    // Initialize cart if not exists
    if (!localStorage.getItem("cart")) {
        localStorage.setItem("cart", JSON.stringify([]));
    }

    function getCart() {
        return JSON.parse(localStorage.getItem("cart")) || [];
    }

    function saveCart(cart) {
        localStorage.setItem("cart", JSON.stringify(cart));
    }

    // Update Cart UI
    function updateCartUI() {
        const cart = getCart();
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        const totalPrice = cart.reduce((sum, item) => sum + item.quantity * item.price, 0);

        document.getElementById("cart-count").innerText = totalItems;
        document.getElementById("cart-total").innerText = totalPrice;
    }

    // Render quantity controls or Add to Cart
    function renderProductButton(button) {
        const name = button.dataset.name;
        const cart = getCart();
        const product = cart.find(p => p.name === name);

        if (product) {
            button.innerHTML = `
                <button class="decrease" data-name="${name}">-</button>
                <span class="qty">${product.quantity}</span>
                <button class="increase" data-name="${name}">+</button>
            `;
            button.classList.add("quantity-container");

            // Attach increase/decrease events
            button.querySelector(".increase").addEventListener("click", () => changeQuantity(name, 1, button));
            button.querySelector(".decrease").addEventListener("click", () => changeQuantity(name, -1, button));
        } else {
            button.innerHTML = "Add to Cart";
            button.classList.remove("quantity-container");
        }
    }

    // Add to Cart
    function addToCart(product, button) {
        const cart = getCart();
        const existing = cart.find(p => p.name === product.name);
        if (existing) {
            if (existing.quantity < 10) existing.quantity++;
        } else {
            cart.push({ ...product, quantity: 1 });
        }
        saveCart(cart);
        updateCartUI();
        renderProductButton(button);
    }

    // Change quantity
    function changeQuantity(name, delta, button) {
        let cart = getCart();
        const product = cart.find(p => p.name === name);
        if (!product) return;

        product.quantity += delta;

        if (product.quantity <= 0) {
            cart = cart.filter(p => p.name !== name);
        } else if (product.quantity > 10) {
            product.quantity = 10;
        }

        saveCart(cart);
        updateCartUI();
        renderProductButton(button);
    }

    // Initialize buttons
    document.querySelectorAll(".cart-btn").forEach(button => {
        const product = {
            name: button.dataset.name,
            price: parseInt(button.dataset.price),
            img: button.dataset.img
        };
        renderProductButton(button); // Render quantity if already in cart
        button.addEventListener("click", () => addToCart(product, button));
    });

    // Load cart on page load
    document.addEventListener("DOMContentLoaded", () => {
        updateCartUI();
    });

    // Mobile filter toggle
    const filterToggle = document.querySelector('.mobile-filter-toggle');
    const filterCol = document.getElementById('filter-col');

    filterToggle.addEventListener('click', () => {
      filterCol.classList.toggle('show');
    });

    // FILTER
    const checkboxes = document.querySelectorAll(".filter-col input[type='checkbox']");
    const products = document.querySelectorAll(".product-card");

    checkboxes.forEach(cb => cb.addEventListener("change", applyFilters));

    function applyFilters() {
      let selectedCategories = [];
      let selectedBrands = [];
      let selectedPrices = [];

      document.querySelectorAll(".filter-group:nth-of-type(1) input:checked").forEach(cb => selectedCategories.push(cb.parentElement.innerText.trim()));
      document.querySelectorAll(".filter-group:nth-of-type(2) input:checked").forEach(cb => selectedBrands.push(cb.parentElement.innerText.trim()));
      document.querySelectorAll(".filter-group:nth-of-type(3) input:checked").forEach(cb => selectedPrices.push(cb.parentElement.innerText.trim()));

      products.forEach(product => {
        const category = product.dataset.category;
        const brand = product.dataset.brand;
        const price = parseInt(product.dataset.price);

        let priceMatch = selectedPrices.length === 0 || selectedPrices.some(range => {
            if (range.includes("0 – ₹1,000")) return price <= 1000;
            if (range.includes("₹1,000 – ₹5,000")) return price >= 1000 && price <= 5000;
            if (range.includes("₹5,000+")) return price > 5000;
        });

        const categoryMatch = selectedCategories.length === 0 || selectedCategories.includes(category);
        const brandMatch = selectedBrands.length === 0 || selectedBrands.includes(brand);

        product.style.display = (categoryMatch && brandMatch && priceMatch) ? "block" : "none";
      });
    }
</script>


  <script src="cart.js"></script>

</body>
</html>